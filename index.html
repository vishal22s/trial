<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Page Splitter & Formatter</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f0f2f5;
            color: #333;
        }

        .main-container {
            max-width: 900px;
            margin-top: 30px;
            margin-bottom: 50px;
        }

        .card {
            border: none;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            margin-bottom: 25px;
            overflow: hidden; /* Ensures child elements respect border-radius */
        }

        .card-header {
            background-color: #ffffff;
            border-bottom: 1px solid #e9ecef;
            padding: 1rem 1.5rem;
            font-weight: 600;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
        }
        
        .card-header .icon {
            font-size: 1.5rem;
            margin-right: 12px;
            color: #4a5a70;
        }

        .upload-area {
            border: 2px dashed #0d6efd;
            border-radius: 8px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out;
            background-color: #fafbff;
        }
        
        .upload-area:hover {
            background-color: #f0f5ff;
            border-color: #0b5ed7;
        }

        .upload-area .upload-icon {
            font-size: 3rem;
            color: #0d6efd;
        }

        .upload-area p {
            margin-top: 15px;
            font-weight: 500;
            color: #495057;
        }
        
        #fileNameDisplay {
            margin-top: 15px;
            font-style: italic;
            color: #6c757d;
        }

        .form-label {
            font-weight: 500;
        }

        .btn-primary {
            background-color: #0d6efd;
            border-color: #0d6efd;
            padding: 12px 30px;
            font-size: 1.1rem;
            font-weight: 500;
            border-radius: 8px;
            transition: all 0.2s ease;
        }
        
        .btn-primary:hover {
            background-color: #0b5ed7;
            border-color: #0a58ca;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        /* Progress Indicator Styles */
        #progress-container {
            list-style: none;
            padding-left: 0;
        }
        
        #progress-container li {
            padding: 12px 15px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            align-items: center;
            opacity: 0.5; /* Initially dimmed */
            transition: opacity 0.3s ease, background-color 0.3s ease;
        }
        #progress-container li:last-child {
            border-bottom: none;
        }
        
        #progress-container li.working {
            opacity: 1;
            font-weight: 600;
            color: #0d6efd;
        }
        
        #progress-container li.completed {
            opacity: 1;
            color: #198754;
        }
        
        .status-icon {
            margin-right: 15px;
            width: 24px;
            text-align: center;
        }

        #results-container .nav-tabs .nav-link {
            font-weight: 500;
        }
        
        .preview-pane {
            width: 100%;
            height: 500px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            background-color: #f8f9fa;
        }

        /* Styling for range slider */
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 8px;
            background: #dee2e6;
            border-radius: 5px;
            outline: none;
            opacity: 0.7;
            transition: opacity .2s;
        }

        input[type="range"]:hover {
            opacity: 1;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #0d6efd;
            cursor: pointer;
            border-radius: 50%;
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #0d6efd;
            cursor: pointer;
            border-radius: 50%;
        }
    </style>
</head>
<body>

    <div class="container main-container">
        
        <header class="text-center mb-5">
            <h1 class="display-5 fw-bold">PDF Page Splitter & Formatter</h1>
            <p class="lead text-muted">Split your PDF into odd and even pages, formatted into a 16-up grid.</p>
        </header>

        <div class="card">
            <div class="card-header">
                <i class="bi bi-file-earmark-arrow-up icon"></i>
                <span>Step 1: Upload Your PDF</span>
            </div>
            <div class="card-body p-4">
                <label for="pdfUpload" class="upload-area">
                    <i class="bi bi-cloud-arrow-up-fill upload-icon"></i>
                    <p class="mb-0">Click to browse or drag & drop a PDF file here</p>
                </label>
                <input type="file" id="pdfUpload" class="d-none" accept=".pdf">
                <div id="fileNameDisplay" class="text-center">No file selected.</div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <i class="bi bi-droplet-half icon"></i>
                <span>Step 2: Add an Optional Watermark</span>
            </div>
            <div class="card-body p-4">
                <div class="form-check form-switch mb-4">
                    <input class="form-check-input" type="checkbox" role="switch" id="watermarkToggle">
                    <label class="form-check-label" for="watermarkToggle">Enable Watermark</label>
                </div>
                
                <div id="watermarkControls" class="d-none">
                    <div class="row g-4">
                        <div class="col-md-12">
                            <label class="form-label">Watermark Type</label>
                            <div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="watermarkType" id="typeCustomText" value="text" checked>
                                    <label class="form-check-label" for="typeCustomText">Custom Text</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="watermarkType" id="typePageNumber" value="page_number">
                                    <label class="form-check-label" for="typePageNumber">Page Number</label>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-12" id="customTextInputContainer">
                            <label for="watermarkText" class="form-label">Watermark Text</label>
                            <input type="text" class="form-control" id="watermarkText" placeholder="e.g., Confidential, Draft...">
                        </div>
                        
                        <div class="col-md-6">
                            <label for="watermarkPosition" class="form-label">Position</label>
                            <select class="form-select" id="watermarkPosition">
                                <option value="center">Center</option>
                                <option value="top-left">Top Left</option>
                                <option value="top-center">Top Center</option>
                                <option value="top-right">Top Right</option>
                                <option value="bottom-left">Bottom Left</option>
                                <option value="bottom-center">Bottom Center</option>
                                <option value="bottom-right">Bottom Right</option>
                            </select>
                        </div>
                        
                        <div class="col-md-6">
                            <label for="watermarkRotation" class="form-label">Rotation</label>
                            <select class="form-select" id="watermarkRotation">
                                <option value="0">0째 (Horizontal)</option>
                                <option value="45">45째 (Diagonal)</option>
                                <option value="-45">-45째 (Diagonal)</option>
                                <option value="90">90째 (Vertical)</option>
                            </select>
                        </div>

                        <div class="col-md-6">
                             <label for="watermarkFontSize" class="form-label">Font Size (pt)</label>
                             <input type="number" class="form-control" id="watermarkFontSize" value="48" min="1">
                        </div>

                        <div class="col-md-6">
                            <label for="watermarkColor" class="form-label">Font Color</label>
                            <input type="color" class="form-control form-control-color" id="watermarkColor" value="#cccccc" title="Choose your color">
                        </div>
                        
                        <div class="col-md-12">
                            <label for="watermarkOpacity" class="form-label">Opacity (<span id="opacityValue">0.5</span>)</label>
                            <input type="range" class="form-range" id="watermarkOpacity" min="0" max="1" step="0.05" value="0.5">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="text-center mb-4">
            <button id="generateButton" class="btn btn-primary btn-lg" disabled>
                <i class="bi bi-gear-fill me-2"></i>Generate PDFs
            </button>
        </div>

        <div id="progressAndResultsCard" class="card d-none">
             <div class="card-header">
                <i class="bi bi-check2-circle icon"></i>
                <span>Processing Status & Results</span>
            </div>
            <div class="card-body p-4">
                <div id="progress-container">
                    <h5 class="mb-3">Working on it...</h5>
                    <ul class="list-group">
                        <li id="status-upload">
                            <span class="status-icon"><i class="bi bi-hourglass-split"></i></span>
                            Uploading and reading PDF file...
                        </li>
                        <li id="status-split">
                            <span class="status-icon"><i class="bi bi-hourglass-split"></i></span>
                            Splitting odd and even pages...
                        </li>
                        <li id="status-format-odd">
                            <span class="status-icon"><i class="bi bi-hourglass-split"></i></span>
                            Formatting odd pages into 4x4 grid...
                        </li>
                        <li id="status-format-even">
                            <span class="status-icon"><i class="bi bi-hourglass-split"></i></span>
                            Formatting even pages into 4x4 grid...
                        </li>
                         <li id="status-watermark">
                            <span class="status-icon"><i class="bi bi-hourglass-split"></i></span>
                            Applying watermark...
                        </li>
                        <li id="status-generate">
                            <span class="status-icon"><i class="bi bi-hourglass-split"></i></span>
                            Generating final PDF files...
                        </li>
                        <li id="status-complete" class="d-none">
                            <span class="status-icon"><i class="bi bi-check-all"></i></span>
                            All tasks completed successfully!
                        </li>
                    </ul>
                </div>
                
                <div id="results-container" class="d-none mt-4">
                     <hr class="my-4">
                     <h5 class="mb-3">Preview & Download</h5>
                     
                     <ul class="nav nav-tabs" id="previewTab" role="tablist">
                       <li class="nav-item" role="presentation">
                         <button class="nav-link active" id="odd-preview-tab" data-bs-toggle="tab" data-bs-target="#odd-preview" type="button" role="tab" aria-controls="odd-preview" aria-selected="true">Odd Pages Preview</button>
                       </li>
                       <li class="nav-item" role="presentation">
                         <button class="nav-link" id="even-preview-tab" data-bs-toggle="tab" data-bs-target="#even-preview" type="button" role="tab" aria-controls="even-preview" aria-selected="false">Even Pages Preview</button>
                       </li>
                     </ul>
                     <div class="tab-content" id="previewTabContent">
                       <div class="tab-pane fade show active" id="odd-preview" role="tabpanel" aria-labelledby="odd-preview-tab">
                           <div class="p-2 border border-top-0 rounded-bottom">
                               <iframe id="oddPdfPreview" class="preview-pane" title="Odd Pages PDF Preview"></iframe>
                           </div>
                       </div>
                       <div class="tab-pane fade" id="even-preview" role="tabpanel" aria-labelledby="even-preview-tab">
                           <div class="p-2 border border-top-0 rounded-bottom">
                               <iframe id="evenPdfPreview" class="preview-pane" title="Even Pages PDF Preview"></iframe>
                           </div>
                       </div>
                     </div>
                     
                     <div class="d-grid gap-3 d-md-flex justify-content-md-center mt-4">
                         <a href="#" id="downloadOddBtn" class="btn btn-success"><i class="bi bi-download me-2"></i>Download Odd Pages PDF</a>
                         <a href="#" id="downloadEvenBtn" class="btn btn-info text-white"><i class="bi bi-download me-2"></i>Download Even Pages PDF</a>
                     </div>
                </div>
            </div>
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- ELEMENT SELECTORS ---
            const pdfUpload = document.getElementById('pdfUpload');
            const fileNameDisplay = document.getElementById('fileNameDisplay');
            const generateButton = document.getElementById('generateButton');
            const watermarkToggle = document.getElementById('watermarkToggle');
            const watermarkControls = document.getElementById('watermarkControls');
            const watermarkTypeRadios = document.querySelectorAll('input[name="watermarkType"]');
            const customTextInputContainer = document.getElementById('customTextInputContainer');
            const opacitySlider = document.getElementById('watermarkOpacity');
            const opacityValue = document.getElementById('opacityValue');
            const progressAndResultsCard = document.getElementById('progressAndResultsCard');
            const progressContainer = document.getElementById('progress-container');
            const resultsContainer = document.getElementById('results-container');

            // --- JAVASCRIPT LOGIC TO BE IMPLEMENTED ---

            // 1. FILE UPLOAD LOGIC
            // - Add a 'change' event listener to `pdfUpload`.
            // - When a file is selected:
            //   - Update `fileNameDisplay.textContent` with the file's name.
            //   - Enable the `generateButton`.
            //   - Reset any previous results or progress indicators.

            // 2. WATERMARK TOGGLE LOGIC
            // - Add a 'change' event listener to `watermarkToggle`.
            // - If checked, show `watermarkControls` by removing the 'd-none' class.
            // - If unchecked, hide `watermarkControls` by adding the 'd-none' class.

            // 3. WATERMARK TYPE LOGIC
            // - Add 'change' event listeners to `watermarkTypeRadios`.
            // - If 'Custom Text' is selected, show `customTextInputContainer`.
            // - If 'Page Number' is selected, hide `customTextInputContainer`.

            // 4. OPACITY SLIDER LOGIC
            // - Add an 'input' event listener to `opacitySlider`.
            // - Update `opacityValue.textContent` with the slider's current value.
            
            // 5. GENERATE BUTTON LOGIC
            // - Add a 'click' event listener to `generateButton`.
            // - On click:
            //   a. Disable the button to prevent multiple clicks.
            //   b. Show the `progressAndResultsCard` and `progressContainer`.
            //   c. Hide the `resultsContainer`.
            //   d. Reset all progress list items to their initial state.
            //   e. Collect all form data: the PDF file, watermark settings (text, position, font, etc.).
            //   f. **BEGIN BACKEND PROCESSING (simulated here)**
            //      - This is where you would use a library like PDF-LIB.js or call a server backend.
            //      - Update the progress list items step-by-step:
            //        - Find `document.getElementById('status-upload')`, add 'working' class.
            //        - After a step is done, remove 'working' and add 'completed', and update the icon.
            //        - e.g., `<i class="bi bi-check-circle-fill"></i>`
            //        - If watermark is disabled, you can skip the 'status-watermark' step.
            //   g. **ONCE PROCESSING IS COMPLETE**:
            //      - Hide the `progressContainer` or show the final "complete" status.
            //      - Show the `resultsContainer`.
            //      - Generate blob URLs for the two new PDFs.
            //      - Set the `src` attribute of the `oddPdfPreview` and `evenPdfPreview` iframes to the blob URLs.
            //      - Set the `href` and `download` attributes for the `downloadOddBtn` and `downloadEvenBtn` anchor tags.
            //      - Re-enable the `generateButton`.

        });
    </script>

</body>
</html>
